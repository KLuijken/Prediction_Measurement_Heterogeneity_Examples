# Prediction_Measurement_Heterogeneity_Examples
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.3948437.svg)](https://doi.org/10.5281/zenodo.3948437)

## Version 1.1.0
Code of the data analysis from the manuscript "Changing predictor measurement procedures affected the performance of prediction models in clinical examples" (https://doi.org/10.1016/j.jclinepi.2019.11.001).

## Run analysis
The script in ./rcode/exe runs the analysis and generates figures at once. For 500 bootstrap repetitions, this takes around 2 hours.  
An explainer of the code can be found [here](https://kluijken.github.io/Prediction_Measurement_Heterogeneity_Examples/Code_Explainer)

## Generating tables and figures
The R code in ./rcode/visualisation creates figures depicting the results of the analysis. The script produces .pdf and .txt files. The scripts uses the .rds files available in ./data/analysis. The output of the script is saved in ./results/.

Attached packages:  
rms_5.1-4  
glmnet_4.0  
data.table_1.12.8  
xtable_1.8-4  
summarytools_0.9.6  
ggplot2_3.3.0  
   
When data are simulated:  
MASS_7.3-51.5   
Matrix_1.2-18  

## Project organization

```
.
├── .gitignore
├── CITATION.md
├── LICENSE.md
├── README.md
├── data
│   ├── analysis             <- datafiles generated by the analysis script
│   ├── raw_data             <- simulated dataset to run code [optional: can store your own datafile here for analysis]
├── docs
│   ├── code_explainer       <- html file explaining all code
├── results
│   ├── apparent_performance <- Calibration plots showing apparent performance
│   ├── descriptives         <- Output describing the data
│   ├── tables               <- Tables shown in manuscript
└── rcode                    <- Source code for this project
    ├── analysis             <- Helper scripts and script for main analysis
    ├── exe                  <- Main script from which analysis is executed
    ├── nhanes_example       <- Stand-alone analysis to produce illustration of measurement heterogeneity using nhanes data
    ├── packages             <- Required dependencies
    └── visualisation        <- Scripts for visualisation of results (tables and figures)


## Citation
To cite this repository, please use “KLuijken. (2020, July 16). KLuijken/Prediction_Measurement_Heterogeneity_Examples (Version v.1.1.1). Zenodo. http://doi.org/10.5281/zenodo.3948437”

